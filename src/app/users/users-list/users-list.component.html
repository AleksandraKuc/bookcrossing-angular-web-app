<!--{{board}}-->
<!--{{errorMessage}}-->

<div class="mat-elevation-z8">

  <mat-table matTableFilter [exampleEntity]="filterEntity" [filterType]="filterType" matSort [dataSource]="dataSource" class="full-width-table" aria-label="Elements">

    <!-- firstName Column -->
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        <mat-form-field appearance="outline">
          <mat-label>First name</mat-label>
          <input matInput placeholder="Name" [(ngModel)]="filterEntity.firstName">
        </mat-form-field>
      </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{row.firstName}} </mat-cell>
    </ng-container>

    <!-- username Column -->
    <ng-container matColumnDef="username">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        <mat-form-field appearance="outline">
          <mat-label>Username</mat-label>
          <input matInput placeholder="Username" [(ngModel)]="filterEntity.username">
        </mat-form-field>
      </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{row.username}} </mat-cell>
    </ng-container>

    <!-- city Column -->
    <ng-container matColumnDef="city">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        <mat-form-field appearance="outline">
          <mat-label>City</mat-label>
          <input matInput placeholder="City" [(ngModel)]="filterEntity.city">
        </mat-form-field>
      </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{row.city}} </mat-cell>
    </ng-container>

    <!-- province Column -->
    <ng-container matColumnDef="province">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        <mat-form-field appearance="outline">
          <mat-label>Province</mat-label>
          <input matInput placeholder="Province" [(ngModel)]="filterEntity.province">
        </mat-form-field>
      </mat-header-cell>
      <mat-cell *matCellDef="let row"> {{row.province}} </mat-cell>
    </ng-container>

    <!-- added Books Column -->
    <ng-container matColumnDef="addedBooks">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Added books</mat-header-cell>
      <mat-cell *matCellDef="let row"> {{row.addedBooks}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="sendMessage">
      <mat-header-cell *matHeaderCellDef > Send message </mat-header-cell>
      <mat-cell *matCellDef="let element" >
        <button mat-button (click)="sendMessage(element.username); $event.stopPropagation()">New message</button>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="handOver">
      <mat-header-cell *matHeaderCellDef > Select user </mat-header-cell>
      <mat-cell *matCellDef="let element" >
        <button mat-button (click)="handOverBook(element.username); $event.stopPropagation()">Select</button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;" [routerLink]="getDetailsLink(row.username)"></mat-row>
  </mat-table>

  <mat-paginator #paginator
      [length]="dataSource?.data.length"
      [pageIndex]="0"
      [pageSize]="50"
      [pageSizeOptions]="[25, 50, 100, 250]">
  </mat-paginator>
</div>
